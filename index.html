<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PrimeZilla — Eletrônicos & Variedades</title>
  <link rel="stylesheet" href="style.css">

  <style>
    /* ======== ESTILO IDÊNTICO À ABA PRODUTOS ======== */

    body {
      background: #07131c;
      color: #e6f7ff;
      margin: 0;
      font-family: Arial, sans-serif;
    }

    .topo {
      background: #0b2230;
      padding: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #0f2d40;
    }

    .logo { height: 60px; }

    .nav a {
      color: #c9ecff;
      margin-left: 12px;
      text-decoration: none;
      font-weight: 600;
    }

    .nav a:hover {
      color: #00d4ff;
    }

    /* HERO escura combinando com o resto */
    .hero {
      background: linear-gradient(90deg, #002637, #00384f);
      padding: 40px 20px;
      text-align: center;
      border-bottom: 2px solid #0f2d40;
    }

    .hero h1 {
      margin: 0;
      font-size: 42px;
      color: #00d4ff;
    }

    .hero p {
      color: #c9ecff;
      margin-top: 10px;
      font-size: 18px;
    }

    .container {
      padding: 20px;
    }

    h2 { color: #00d4ff; }

    /* GRID igual produtos */
    .grid {
      display: grid;
      gap: 12px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    /* CARD igualzinho a aba produtos */
    .card {
      background: #0b2230;
      border-radius: 8px;
      padding: 10px;
      color: #e6f7ff;
      display: flex;
      gap: 10px;
      align-items: flex-start;
      border: 1px solid #0f2d40;
    }

    .card .media img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 6px;
    }

    .price {
      font-weight: 700;
      margin: 6px 0;
    }

    /* Botão igual produtos */
    .btnBuy {
      background: linear-gradient(90deg, #00d4ff, #007ac1);
      color: #001826;
      padding: 8px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }

    .btnBuy:hover {
      opacity: 0.9;
    }

    .footer {
      background: #0b2230;
      padding: 20px;
      text-align: center;
      border-top: 2px solid #0f2d40;
      color: #6bc8ff;
      margin-top: 30px;
    }
  </style>
</head>
<body>

<header class="topo">
  <div class="brand">
    <img src="https://res.cloudinary.com/duwsueept/image/upload/jq5bm4gwdwi3kpxgrago" class="logo" alt="PrimeZilla">
  </div>
  <nav class="nav">
    <a href="index.html" class="ativo">Início</a>
    <a href="produtos.html">Produtos</a>
    <a href="admin.html">Admin</a>
    <a href="contato.html">Contato</a>
  </nav>
</header>

<section class="hero">
  <div class="hero-inner">
    <h1>PrimeZilla</h1>
    <p>Eletrônicos & Variedades — entrega rápida em Jardim e Guia Lopes</p>
  </div>
</section>

<main class="container">
  <section class="catalog">
    <h2>Destaques</h2>
    <div id="productsGrid" class="grid">Carregando produtos...</div>
  </section>
</main>

<footer class="footer">
  © 2025 PrimeZilla — SITE CRIADO POR @JHON_LORRAN_
</footer>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getFirestore, collection, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDlzVS8ZkI4bVAmcFyKH1PDojvTXGYXyso",
    authDomain: "primezilla-70b94.firebaseapp.com",
    projectId: "primezilla-70b94",
    storageBucket: "primezilla-70b94.firebasestorage.app",
    appId: "1:910803172382:web:db82186d77b8281f13020f"
  };

  const PHONE = '5567992018672';

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  function esc(s) {
    return String(s||'').replace(/[&<>"']/g,m=>(
      {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]
    ));
  }

  document.addEventListener('DOMContentLoaded', ()=>{
    const grid = document.getElementById('productsGrid');
    const q = query(collection(db,'products'), orderBy('createdAt','desc'));

    onSnapshot(q, snap => {
      grid.innerHTML = '';

      snap.forEach(doc => {
        const p = doc.data();
        if(!p.active) return;

        const img = p.imageUrl || p.image || 'placeholder.png';
        const priceText = p.price
          ? `${p.currency||'R$'} ${Number(p.price).toFixed(2)}`
          : 'Consultar valores';

        const card = document.createElement('div');
        card.className = 'card';

        card.innerHTML = `
          <div class="media"><img src="${esc(img)}" alt="${esc(p.name)}"></div>
          <div class="info">
            <h3>${esc(p.name)}</h3>
            <p class="price">${esc(priceText)}</p>
            <button class="btnBuy">Comprar (WhatsApp)</button>
          </div>
        `;

        card.querySelector('.btnBuy').addEventListener('click', ()=>{
          const text = encodeURIComponent(
            `Olá! Tenho interesse no produto: ${p.name}\nValor: ${priceText}`
          );
          window.open(`https://wa.me/${PHONE}?text=${text}`, '_blank');
        });

        grid.appendChild(card);
      });

      if(grid.innerHTML === '') {
        grid.innerHTML = '<p>Nenhum produto disponível.</p>';
      }
    });
  });
</script>

</body>
</html>
